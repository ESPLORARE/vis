<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>北区客户部 | 人才画像与能力雷达看板</title>
    <!-- 引入 Tailwind CSS 用于美化界面 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 ECharts 用于图表 -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f3f4f6; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .transition-all { transition: all 0.3s ease; }
        
        /* 模态框动画 */
        .modal { opacity: 0; visibility: hidden; transition: all 0.3s ease-in-out; }
        .modal.active { opacity: 1; visibility: visible; }
        .modal-content { transform: scale(0.95); transition: all 0.3s ease-in-out; }
        .modal.active .modal-content { transform: scale(1); }
        
        /* 自定义滚动条 */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="text-slate-800">

    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center mb-4 md:mb-0">
                <div class="bg-indigo-600 p-2 rounded-lg mr-3">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-gray-900">北区客户部</h1>
                    <p class="text-xs text-gray-500">人员画像与能力雷达仪表盘</p>
                </div>
            </div>
            
            <!-- 搜索框 -->
            <div class="relative w-full md:w-64">
                <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </span>
                <input type="text" id="searchInput" placeholder="搜索姓名..." class="w-full py-2 pl-10 pr-4 text-sm text-gray-700 bg-gray-100 border-none rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors">
            </div>
        </div>
    </header>

    <!-- 主内容区域：卡片网格 -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- 统计概览 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-indigo-500">
                <div class="text-gray-500 text-sm">总人数</div>
                <div class="text-2xl font-bold" id="totalCount">0</div>
            </div>
            <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-emerald-500">
                <div class="text-gray-500 text-sm">平均行业年限</div>
                <div class="text-2xl font-bold" id="avgExp">0 年</div>
            </div>
            <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-blue-500">
                <div class="text-gray-500 text-sm">本科及以上占比</div>
                <div class="text-2xl font-bold" id="degreeRate">0%</div>
            </div>
            <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-orange-500">
                <div class="text-gray-500 text-sm">平均综合能力分</div>
                <div class="text-2xl font-bold" id="avgScore">0</div>
            </div>
        </div>

        <!-- 人员卡片列表 -->
        <div id="cardGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- 卡片将通过 JS 动态生成 -->
        </div>
    </main>

    <!-- 详情模态框 (Modal) -->
    <div id="profileModal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6">
        <div class="absolute inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm" onclick="closeModal()"></div>
        
        <div class="modal-content bg-white w-full max-w-5xl h-[90vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col relative z-10">
            <!-- Modal Header -->
            <div class="flex justify-between items-center p-6 border-b border-gray-100 bg-gray-50">
                <div class="flex items-center gap-4">
                    <div id="modalAvatar" class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xl">
                        <!-- 姓氏 -->
                    </div>
                    <div>
                        <h2 id="modalName" class="text-2xl font-bold text-gray-800">姓名</h2>
                        <p id="modalJob" class="text-sm text-gray-500">职位/曾任工作</p>
                    </div>
                </div>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-200 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="flex-1 overflow-y-auto p-6 bg-white">
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                    
                    <!-- 左侧：详细画像 -->
                    <div class="lg:col-span-5 space-y-6">
                        <!-- 基础标签 -->
                        <div class="flex flex-wrap gap-2" id="modalTags">
                            <!-- JS生成标签 -->
                        </div>

                        <!-- 基本信息块 -->
                        <div class="bg-slate-50 p-4 rounded-xl border border-slate-100">
                            <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3">基本信息</h3>
                            <div class="grid grid-cols-2 gap-y-2 text-sm">
                                <span class="text-gray-500">年龄:</span> <span id="modalAge" class="font-medium">-</span>
                                <span class="text-gray-500">性别:</span> <span id="modalGender" class="font-medium">-</span>
                                <span class="text-gray-500">学历:</span> <span id="modalDegree" class="font-medium">-</span>
                                <span class="text-gray-500">专业:</span> <span id="modalMajor" class="font-medium truncate">-</span>
                                <span class="text-gray-500">行业年限:</span> <span id="modalExp" class="font-medium">-</span>
                                <span class="text-gray-500">跳槽次数:</span> <span id="modalJump" class="font-medium">-</span>
                            </div>
                        </div>

                        <!-- 软性素质 (High/Medium/Low) -->
                        <div>
                            <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3">价值观与胜任力</h3>
                            <div class="space-y-3" id="modalSoftSkills">
                                <!-- JS 生成进度条或状态块 -->
                            </div>
                        </div>

                        <!-- 个人评价/特点 -->
                        <div id="modalFeaturesBox">
                            <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3">个人特质 & 爱好</h3>
                            <p id="modalFeatures" class="text-sm text-gray-600 leading-relaxed bg-indigo-50 p-3 rounded-lg border border-indigo-100">
                                <!-- 爱好，性格等 -->
                            </p>
                        </div>
                    </div>

                    <!-- 右侧：雷达图与能力分析 -->
                    <div class="lg:col-span-7 flex flex-col">
                        <div class="bg-white rounded-xl border border-gray-100 shadow-sm flex-1 flex flex-col p-4">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="font-bold text-gray-800">核心能力雷达 (知识技能 & 方案能力)</h3>
                                <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">满分: 5.0</span>
                            </div>
                            <!-- 雷达图容器 -->
                            <div id="radarChart" class="w-full flex-1 min-h-[400px]"></div>
                        </div>

                        <!-- 底部简评 -->
                        <div class="mt-4 grid grid-cols-3 gap-4">
                            <div class="bg-blue-50 p-3 rounded-lg text-center">
                                <div class="text-xs text-blue-500 mb-1">技术层面</div>
                                <div id="techLevel" class="font-bold text-blue-800">-</div>
                            </div>
                            <div class="bg-purple-50 p-3 rounded-lg text-center">
                                <div class="text-xs text-purple-500 mb-1">业务层面</div>
                                <div id="bizLevel" class="font-bold text-purple-800">-</div>
                            </div>
                            <div class="bg-pink-50 p-3 rounded-lg text-center">
                                <div class="text-xs text-pink-500 mb-1">表现层面</div>
                                <div id="presLevel" class="font-bold text-pink-800">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. 数据准备 (模拟Excel中的数据) ---
        // 为了演示，我提取了图片中完整度较高和典型的几行数据
       const personnelData = [
  {
    id: 1, name: "张博禹", gender: "男", age: 34,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "全能，高", biz: "高", presentation: "高", efficiency: "高", creative: "高", sense: "高" },
    scores: { industry: 4, prof: 3, painPoints: 3, solution: 4, valueDeliv: 3.5, relation: 3.5, coord: 3, overall: 4 }
  },
  {
    id: 2, name: "杨柳", gender: "男", age: 30,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "中" },
    skills: { tech: "全能，高", biz: "高", presentation: "高", efficiency: "高", creative: "高", sense: "中" },
    scores: { industry: 4, prof: 3.5, painPoints: 4, solution: 4, valueDeliv: 3.5, relation: 3.5, coord: 3, overall: 4 }
  },
  {
    id: 3, name: "张硕", gender: "男", age: 28,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "中" },
    competency: { expression: "高", logic: "高", psycho: "中" },
    skills: { tech: "商务弱，高", biz: "高", presentation: "中", efficiency: "高", creative: "中", sense: "中" },
    scores: { industry: 4, prof: 3.5, painPoints: 3.5, solution: 4, valueDeliv: 4, relation: 4, coord: 3, overall: 4 }
  },
  {
    id: 4, name: "丁乐延", gender: "男", age: 28,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "技术弱，高", biz: "高", presentation: "高", efficiency: "高", creative: "高", sense: "中" },
    scores: { industry: 3.5, prof: 3, painPoints: 3, solution: 3, valueDeliv: 2.5, relation: 2.5, coord: 3, overall: 3 }
  },
  {
    id: 5, name: "高鹏程", gender: "男", age: 32,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "全能，中", biz: "高", presentation: "高", efficiency: "中", creative: "中", sense: "中" },
    scores: { industry: 4, prof: 3, painPoints: 3, solution: 3, valueDeliv: 3, relation: 3, coord: 3, overall: 3.5 }
  },
  {
    id: 6, name: "崔东升", gender: "男", age: 38,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "中" },
    competency: { expression: "中", logic: "中", psycho: "中" },
    skills: { tech: "技术弱，中", biz: "中", presentation: "中", efficiency: "中", creative: "中", sense: "中" },
    scores: { industry: 3, prof: 2.5, painPoints: 3, solution: 2, valueDeliv: 2.5, relation: 2.5, coord: 3, overall: 3 }
  },
  {
    id: 7, name: "董家能", gender: "男", age: 31,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "中", growth: "中" },
    competency: { expression: "高", logic: "中", psycho: "中" },
    skills: { tech: "技术弱，中", biz: "高", presentation: "中", efficiency: "中", creative: "中", sense: "中" },
    scores: { industry: 2, prof: 2, painPoints: 3, solution: 2, valueDeliv: 2, relation: 2, coord: 3, overall: 2 }
  },
  {
    id: 8, name: "王思远", gender: "男", age: 38,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "全能，高", biz: "高", presentation: "高", efficiency: "高", creative: "高", sense: "高" },
    scores: { industry: 4, prof: 4, painPoints: 3, solution: 3, valueDeliv: 3.5, relation: 3.5, coord: 3, overall: 4 }
  },
  {
    id: 9, name: "邬贝辉", gender: "男", age: 35,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "全能，高", biz: "高", presentation: "中", efficiency: "高", creative: "高", sense: "中" },
    scores: { industry: 3.5, prof: 3, painPoints: 3, solution: 3, valueDeliv: 3, relation: 3, coord: 3, overall: 3.5 }
  },
  {
    id: 10, name: "范仔骏", gender: "男", age: 31,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "高", growth: "中" },
    competency: { expression: "中", logic: "中", psycho: "中" },
    skills: { tech: "技术弱，中", biz: "中", presentation: "中", efficiency: "中", creative: "中", sense: "中" },
    scores: { industry: 3, prof: 3, painPoints: 3, solution: 3, valueDeliv: 2.5, relation: 2.5, coord: 3, overall: 3 }
  },
  {
    id: 11, name: "刘存", gender: "男", age: 34,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "中", growth: "高" },
    competency: { expression: "高", logic: "中", psycho: "中" },
    skills: { tech: "全能，中", biz: "高", presentation: "中", efficiency: "中", creative: "中", sense: "中" },
    scores: { industry: 2.5, prof: 2, painPoints: 3, solution: 3, valueDeliv: 2, relation: 2, coord: 3, overall: 2 }
  },
  {
    id: 12, name: "孙闪", gender: "男", age: 36,
    hobbies: "", personality: "", family: "",
    years: null, jumps: null, prevJob: "",
    degree: "", school: "", major: "",
    values: { match: "中", growth: "中" },
    competency: { expression: "中", logic: "高", psycho: "高" },
    skills: { tech: "技术弱，中", biz: "中", presentation: "中", efficiency: "中", creative: "中", sense: "中" },
    scores: { industry: 2, prof: 1, painPoints: 2, solution: 2, valueDeliv: 2, relation: 2, coord: 3, overall: 2 }
  },

  /* ===== 13–23：与你示例完全一致，略去重复说明 ===== */

  {
    id: 13, name: "孙策", gender: "男", age: 34,
    hobbies: "健康，打篮球", personality: "外向，皮实", family: "河北沧州-北京",
    years: 8, jumps: 1, prevJob: "热力公司售前",
    degree: "本科", school: "燕山大学里仁学院", major: "建筑环境与设备工程",
    values: { match: "高", growth: "高" },
    competency: { expression: "中", logic: "中", psycho: "高" },
    skills: { tech: "工程部业务，高", biz: "高", presentation: "高", efficiency: "高", creative: "高", sense: "中" },
    scores: { industry: 3.5, prof: 3.5, painPoints: 4, solution: 4, valueDeliv: 3, relation: 3.5, coord: 3, overall: 4 }
  },
  {
    id: 14, name: "韩硕", gender: "男", age: 29,
    hobbies: "健康，打篮球", personality: "内向，真诚", family: "河南-北京",
    years: 8, jumps: 0, prevJob: "运维",
    degree: "本科", school: "华北理工大学轻工学院", major: "建筑环境与能源应用工程",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "中" },
    skills: { tech: "能源运维，高", biz: "高", presentation: "中", efficiency: "高", creative: "中", sense: "高" },
    scores: { industry: 4, prof: 3.5, painPoints: 4, solution: 4, valueDeliv: 4, relation: 4, coord: 3, overall: 4 }
  },
  {
    id: 15, name: "童漫漫", gender: "女", age: 28,
    hobbies: "健康，健身", personality: "外向，活泼", family: "河南-北京",
    years: 6, jumps: 1, prevJob: "云栋科技",
    degree: "本科", school: "河南科技大学", major: "建筑环境与能源应用工程",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "暖通，高", biz: "高", presentation: "中", efficiency: "高", creative: "高", sense: "中" },
    scores: { industry: 4, prof: 3.5, painPoints: 4, solution: 4, valueDeliv: 4, relation: 4, coord: 4, overall: 4 }
  },
  {
    id: 16, name: "高燕敏", gender: "女", age: 32,
    hobbies: "健康，看书", personality: "内向，踏实", family: "北京",
    years: 8, jumps: 0, prevJob: "数据分析",
    degree: "本科", school: "山东建筑大学", major: "能源工程及自动化",
    values: { match: "高", growth: "高" },
    competency: { expression: "中", logic: "中", psycho: "中" },
    skills: { tech: "数据分析，高", biz: "高", presentation: "中", efficiency: "高", creative: "中", sense: "中" },
    scores: { industry: 3.5, prof: 3.5, painPoints: 4, solution: 3, valueDeliv: 3, relation: 4, coord: 3, overall: 4 }
  },
  {
    id: 17, name: "栾金颖", gender: "女", age: 33,
    hobbies: "健康，看书", personality: "内向，善良", family: "河北石家庄-北京",
    years: 10, jumps: 1, prevJob: "广联达产品经理",
    degree: "本科", school: "北京建筑大学", major: "自动化",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "产品能力，高", biz: "高", presentation: "中", efficiency: "高", creative: "高", sense: "高" },
    scores: { industry: 3, prof: 4, painPoints: 5, solution: 4, valueDeliv: 4, relation: 4, coord: 4, overall: 4 }
  },
  {
    id: 18, name: "曲子奇", gender: "男", age: 31,
    hobbies: "健康，钢琴", personality: "内向，沉稳", family: "黑龙江哈尔滨-上海",
    years: 7, jumps: 3, prevJob: "张江、亚朵、设计院设计师",
    degree: "本科", school: "哈尔滨工业大学", major: "建筑环境与设备工程",
    values: { match: "高", growth: "中" },
    competency: { expression: "高", logic: "高", psycho: "中" },
    skills: { tech: "暖通，高", biz: "高", presentation: "中", efficiency: "中", creative: "高", sense: "中" },
    scores: { industry: 4, prof: 4, painPoints: 3.5, solution: 3.5, valueDeliv: 4, relation: 4, coord: 3.5, overall: 3 }
  },
  {
    id: 19, name: "史珂珂", gender: "女", age: 31,
    hobbies: "健康，画画", personality: "内向，踏实", family: "安徽阜阳-上海",
    years: 1, jumps: 1, prevJob: "华东设计院设计师",
    degree: "硕士", school: "华南理工大学", major: "建筑学",
    values: { match: "高", growth: "高" },
    competency: { expression: "中", logic: "中", psycho: "中" },
    skills: { tech: "建筑，高", biz: "中", presentation: "中", efficiency: "高", creative: "中", sense: "中" },
    scores: { industry: 4, prof: 4, painPoints: 3, solution: 3.5, valueDeliv: 4, relation: 3, coord: 2, overall: 4 }
  },
  {
    id: 20, name: "顾智浩", gender: "男", age: 32,
    hobbies: "健康，打篮球", personality: "内向，踏实", family: "上海",
    years: 5, jumps: 2, prevJob: "华建数创、毕埃慕项目经理",
    degree: "本科", school: "上海工程技术大学", major: "工程管理",
    values: { match: "高", growth: "高" },
    competency: { expression: "中", logic: "高", psycho: "高" },
    skills: { tech: "BIM，高", biz: "中", presentation: "中", efficiency: "高", creative: "中", sense: "中" },
    scores: { industry: 3, prof: 3.5, painPoints: 3, solution: 3, valueDeliv: 3.5, relation: 3.5, coord: 3, overall: 3 }
  },
  {
    id: 21, name: "张恩泽", gender: "男", age: 29,
    hobbies: "健康，打篮球", personality: "外向，热情", family: "上海",
    years: 5, jumps: 3, prevJob: "构力BIM项目经理、售前",
    degree: "本科", school: "湖南工业大学", major: "土木工程",
    values: { match: "高", growth: "高" },
    competency: { expression: "中", logic: "高", psycho: "高" },
    skills: { tech: "BIM，高", biz: "中", presentation: "中", efficiency: "高", creative: "中", sense: "高" },
    scores: { industry: 3, prof: 3.5, painPoints: 3, solution: 3, valueDeliv: 3.5, relation: 3.5, coord: 3, overall: 3 }
  },
  {
    id: 22, name: "郝星", gender: "男", age: 36,
    hobbies: "健康，打篮球", personality: "外向，直接", family: "河北唐山-燕郊",
    years: 10, jumps: 2, prevJob: "数途、达美盛解决方案",
    degree: "大专", school: "河北农业大学", major: "计算机应用技术",
    values: { match: "高", growth: "中" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "全能，高", biz: "高", presentation: "高", efficiency: "高", creative: "高", sense: "高" },
    scores: { industry: 4, prof: 4, painPoints: 4, solution: 5, valueDeliv: 4, relation: 4, coord: 5, overall: 5 }
  },
  {
    id: 23, name: "朱永磊", gender: "男", age: 41,
    hobbies: "健康，打篮球", personality: "内向，沉稳", family: "河北廊坊-北京",
    years: 15, jumps: 1, prevJob: "施耐德管培生",
    degree: "硕士", school: "北京科技大学", major: "控制科学与工程",
    values: { match: "高", growth: "高" },
    competency: { expression: "高", logic: "高", psycho: "高" },
    skills: { tech: "全能，高", biz: "高", presentation: "高", efficiency: "高", creative: "高", sense: "高" },
    scores: { industry: 5, prof: 5, painPoints: 5, solution: 5, valueDeliv: 5, relation: 5, coord: 5, overall: 5 }
  }
];


        // --- 2. 页面初始化逻辑 ---
        
        let myChart = null; // ECharts 实例

        document.addEventListener('DOMContentLoaded', () => {
            renderCards(personnelData);
            updateStats(personnelData);

            // 搜索功能
            document.getElementById('searchInput').addEventListener('input', (e) => {
                const keyword = e.target.value.toLowerCase();
                const filtered = personnelData.filter(p => p.name.toLowerCase().includes(keyword));
                renderCards(filtered);
            });
        });

        // 渲染顶部统计
        function updateStats(data) {
            document.getElementById('totalCount').innerText = data.length;
            
            // 计算平均年限
            const validExp = data.filter(p => p.years !== null);
            const avgY = validExp.reduce((acc, curr) => acc + curr.years, 0) / validExp.length;
            document.getElementById('avgExp').innerText = validExp.length ? avgY.toFixed(1) + " 年" : "-";

            // 计算本科率
            const degrees = data.filter(p => p.degree).length;
            const bachelors = data.filter(p => p.degree && (p.degree.includes("本科") || p.degree.includes("硕士") || p.degree.includes("博士"))).length;
            document.getElementById('degreeRate').innerText = degrees ? Math.round((bachelors / degrees) * 100) + "%" : "-";

            // 计算平均分 (简单平均几个关键能力)
            const avgS = data.reduce((acc, curr) => {
                const s = curr.scores;
                const personalAvg = (s.industry + s.prof + s.painPoints + s.solution + s.valueDeliv) / 5;
                return acc + personalAvg;
            }, 0) / data.length;
            document.getElementById('avgScore').innerText = avgS.toFixed(1);
        }

        // 渲染卡片
        function renderCards(data) {
            const grid = document.getElementById('cardGrid');
            grid.innerHTML = '';

            if (data.length === 0) {
                grid.innerHTML = `<div class="col-span-full text-center py-10 text-gray-400">没有找到匹配的人员</div>`;
                return;
            }

            data.forEach(person => {
                // 计算一个综合能力展示分
                const scoreAvg = ((person.scores.industry + person.scores.painPoints + person.scores.solution) / 3).toFixed(1);
                
                // 头像颜色随机
                const colors = ['bg-blue-500', 'bg-indigo-500', 'bg-emerald-500', 'bg-rose-500', 'bg-amber-500'];
                const randomColor = colors[person.id % colors.length];

                const card = document.createElement('div');
                card.className = "bg-white rounded-xl shadow-sm border border-gray-100 p-6 cursor-pointer card-hover transition-all flex flex-col justify-between h-full";
                card.onclick = () => openModal(person.id);

                card.innerHTML = `
                    <div>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 rounded-full ${randomColor} text-white flex items-center justify-center font-bold shadow-md">
                                    ${person.name[0]}
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900">${person.name}</h3>
                                    <p class="text-xs text-gray-500">${person.degree || '未知'} · ${person.age}岁</p>
                                </div>
                            </div>
                            <div class="bg-gray-50 px-2 py-1 rounded text-xs font-medium text-gray-600">
                                ${person.years ? person.years + '年经验' : 'N/A'}
                            </div>
                        </div>
                        
                        <div class="space-y-2 mb-4">
                            <div class="text-sm text-gray-600 flex justify-between">
                                <span>曾任:</span>
                                <span class="font-medium text-gray-800 truncate w-32 text-right" title="${person.prevJob}">${person.prevJob || '-'}</span>
                            </div>
                            <div class="text-sm text-gray-600 flex justify-between">
                                <span>专业:</span>
                                <span class="font-medium text-gray-800 truncate w-32 text-right" title="${person.major}">${person.major || '-'}</span>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-2 mb-4">
                            ${person.skills.tech.includes("全能") ? '<span class="px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded text-xs">全能型</span>' : ''}
                            ${person.skills.tech.includes("BIM") ? '<span class="px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs">BIM专家</span>' : ''}
                            <span class="px-2 py-0.5 bg-indigo-50 text-indigo-700 rounded text-xs">方案力 ${person.scores.solution}</span>
                        </div>
                    </div>

                    <div class="mt-4 pt-4 border-t border-gray-50 flex justify-between items-center">
                        <span class="text-xs text-gray-400">点击查看雷达图</span>
                        <div class="flex items-center text-indigo-600 font-bold">
                            <span class="text-lg">${scoreAvg}</span>
                            <span class="text-xs ml-1 text-gray-400 font-normal">/ 5.0</span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- 3. 详情页逻辑 ---

        function openModal(id) {
            const person = personnelData.find(p => p.id === id);
            if (!person) return;

            // 填充文本数据
            document.getElementById('modalName').innerText = person.name;
            document.getElementById('modalAvatar').innerText = person.name[0];
            document.getElementById('modalJob').innerText = person.prevJob ? `前职: ${person.prevJob}` : '职位信息不详';
            document.getElementById('modalAge').innerText = person.age;
            document.getElementById('modalGender').innerText = person.gender;
            document.getElementById('modalDegree').innerText = person.degree || '-';
            document.getElementById('modalMajor').innerText = person.major || '-';
            document.getElementById('modalExp').innerText = person.years ? `${person.years}年` : '-';
            document.getElementById('modalJump').innerText = person.jumps !== null ? person.jumps : '-';

            // 填充标签
            const tagsContainer = document.getElementById('modalTags');
            tagsContainer.innerHTML = '';
            if (person.hobbies) person.hobbies.split('，').forEach(tag => addTag(tagsContainer, tag, 'green'));
            if (person.personality) person.personality.split('，').forEach(tag => addTag(tagsContainer, tag, 'blue'));
            if (person.family) addTag(tagsContainer, person.family, 'gray');

            // 填充个人特质
            const features = [];
            if(person.personality) features.push(`性格${person.personality}`);
            if(person.hobbies) features.push(`爱好${person.hobbies}`);
            document.getElementById('modalFeatures').innerText = features.length > 0 ? features.join('；') + "。" : "暂无详细描述数据。";

            // 填充软技能
            const softContainer = document.getElementById('modalSoftSkills');
            softContainer.innerHTML = `
                ${renderSkillBar("价值观匹配", person.values.match)}
                ${renderSkillBar("团队成长性", person.values.growth)}
                ${renderSkillBar("表达能力", person.competency.expression)}
                ${renderSkillBar("逻辑思维", person.competency.logic)}
                ${renderSkillBar("心理素质", person.competency.psycho)}
            `;

            // 填充简评
            document.getElementById('techLevel').innerText = person.skills.tech.split('，')[1] || person.skills.tech;
            document.getElementById('bizLevel').innerText = person.skills.biz;
            document.getElementById('presLevel').innerText = person.skills.presentation;

            // 显示 Modal
            const modal = document.getElementById('profileModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // 禁止背景滚动

            // 初始化或更新图表 (需要等待 Modal 可见后渲染，否则尺寸可能不对)
            setTimeout(() => {
                initRadarChart(person);
            }, 100);
        }

        function closeModal() {
            const modal = document.getElementById('profileModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // 辅助：添加标签
        function addTag(container, text, color) {
            const span = document.createElement('span');
            const classes = {
                green: "bg-emerald-50 text-emerald-700 border-emerald-100",
                blue: "bg-blue-50 text-blue-700 border-blue-100",
                gray: "bg-gray-100 text-gray-600 border-gray-200"
            };
            span.className = `px-3 py-1 rounded-full text-xs font-medium border ${classes[color] || classes.gray}`;
            span.innerText = text;
            container.appendChild(span);
        }

        // 辅助：渲染定性能力条
        function renderSkillBar(label, level) {
            let width = '0%';
            let color = 'bg-gray-200';
            if (level === '高') { width = '95%'; color = 'bg-indigo-500'; }
            else if (level === '中') { width = '60%'; color = 'bg-indigo-300'; }
            else if (level === '低') { width = '30%'; color = 'bg-gray-300'; }

            return `
                <div class="flex items-center text-xs">
                    <span class="w-20 text-gray-500">${label}</span>
                    <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden ml-2">
                        <div class="h-full ${color} rounded-full" style="width: ${width}"></div>
                    </div>
                    <span class="ml-2 w-4 text-right font-medium ${level==='高'?'text-indigo-600':'text-gray-400'}">${level}</span>
                </div>
            `;
        }

        // --- 4. ECharts 雷达图配置 ---

        function initRadarChart(person) {
            const chartDom = document.getElementById('radarChart');
            if (myChart) {
                myChart.dispose();
            }
            myChart = echarts.init(chartDom);

            const scores = person.scores;
            
            // 数据映射
            const dataValues = [
                scores.industry,
                scores.prof,
                scores.painPoints,
                scores.solution,
                scores.valueDeliv,
                scores.relation,
                scores.coord
            ];

            const option = {
                color: ['#4f46e5'],
                tooltip: {
                    trigger: 'item'
                },
                radar: {
                    indicator: [
                        { name: '行业知识', max: 5 },
                        { name: '专业知识', max: 5 },
                        { name: '痛点识别', max: 5 },
                        { name: '方案设计', max: 5 },
                        { name: '价值传递', max: 5 },
                        { name: '客户关系', max: 5 },
                        { name: '资源协调', max: 5 }
                    ],
                    radius: '65%',
                    center: ['50%', '50%'],
                    splitNumber: 5,
                    splitArea: {
                        areaStyle: {
                            color: ['#f8fafc', '#f1f5f9', '#e2e8f0', '#cbd5e1', '#94a3b8'].reverse(),
                            shadowColor: 'rgba(0, 0, 0, 0.1)',
                            shadowBlur: 10
                        }
                    },
                    axisName: {
                        color: '#64748b',
                        backgroundColor: '#fff',
                        borderRadius: 3,
                        padding: [3, 5]
                    }
                },
                series: [
                    {
                        name: '能力评分',
                        type: 'radar',
                        data: [
                            {
                                value: dataValues,
                                name: person.name,
                                areaStyle: {
                                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                        { offset: 0, color: 'rgba(79, 70, 229, 0.5)' },
                                        { offset: 1, color: 'rgba(79, 70, 229, 0.1)' }
                                    ])
                                },
                                lineStyle: {
                                    width: 3
                                },
                                symbolSize: 6
                            }
                        ]
                    }
                ]
            };

            myChart.setOption(option);
            
            // 响应式调整
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }
    </script>
</body>
</html>
